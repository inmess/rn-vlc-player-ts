{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/playerView/index.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Created by yuanzhou.xu on 2018/5/15.\n */\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport {\n    StatusBar,\n    View,\n    StyleSheet,\n    Platform,\n    TouchableOpacity,\n    Text,\n    Dimensions,\n    BackHandler,\n    ViewStyle,\n} from 'react-native';\n\nimport VLCPlayerView from './VLCPlayerView';\nimport PropTypes from 'prop-types';\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons';\nimport { getStatusBarHeight } from './SizeController';\nconst statusBarHeight = getStatusBarHeight();\nconst _fullKey = 'commonVideo_android_fullKey';\nlet deviceHeight = Dimensions.get('window').height;\nlet deviceWidth = Dimensions.get('window').width;\n\ninterface CommonVideoProps {\n    widthCamera?: number;\n    height?: number;\n    showGG?: boolean;\n    ggUrl?: string;\n    url?: string;\n    isGG?: boolean;\n\n    /**\n     * 是否显示返回按钮\n     */\n    showBack?: boolean;\n\n    /**\n     * 是否显示标题\n     */\n    showTitle?: boolean;\n\n    /**\n     * 视频播放结束\n     */\n    onEnd?: () => void;\n\n    /**\n     * 广告头播放结束\n     */\n    onGGEnd?: () => void;\n\n    /**\n     * 开启全屏\n     */\n    startFullScreen?: () => void;\n\n    /**\n     * 关闭全屏\n     */\n    closeFullScreen?: () => void;\n\n    /**\n     * 返回按钮点击事件\n     */\n    onLeftPress?: () => void;\n\n    /**\n     * 标题\n     */\n    title?: string;\n    onGoLivePress?: () => void;\n    onReplayPress?: () => void;\n    style?: ViewStyle;\n    isFull?: boolean;\n    videoAspectRatio?: string;\n    fullVideoAspectRatio?: string;\n    BackHandle?: any;\n    Orientation?: any;\n\n}\n\nexport default function CommonVideo(props: CommonVideoProps) {\n\n    const {\n        height: propHeight = 250,\n        showGG = false,\n        ggUrl = '',\n        url = '',\n        showBack = false,\n        showTitle = false,\n        widthCamera,\n        isFull\n    } = props;\n\n    if(widthCamera) deviceWidth = widthCamera;\n\n    // static navigationOptions = {\n    //     header: null,\n    // };\n    const componentMounted = useRef(false);\n    const initialHeight = useRef(200);\n\n    const [isEndGG, setIsEndGG] = useState(false);\n    const [isVidFull, setIsVidFull] = useState(false);\n    const [currentUrl, setCurrentUrl] = useState('');\n    const [storeUrl, setStoreUrl] = useState('');\n    const [ currentVideoAspectRatio, setCurrentVideoAspectRatio ] = useState(deviceWidth + \":\" + 200);\n    const [ width, setWidth ] = useState(0);\n    const [ height, setHeight ] = useState(0);\n\n    // const width = useRef(0);\n    // const height = useRef(0);\n\n    useEffect(() => {\n        if (url && url !== storeUrl) {\n            if (storeUrl === \"\") {\n                setCurrentUrl(url);\n                setStoreUrl(url);\n                // setIsEndGG(false);\n            } else {\n                setCurrentUrl(\"\");\n                setStoreUrl(url);\n                // setIsEndGG(false);\n            }\n        }\n    }, [url]);\n\n    useEffect(() => {\n        if (url !== storeUrl && componentMounted.current) {\n            setStoreUrl(url);\n            setCurrentUrl(url);\n        }\n    }, [url]);\n\n    // componentDidMount() {\n    //     this._componentMounted = true\n    //     StatusBar.setBarStyle(\"light-content\");\n    //     let { style, isGG } = this.props;\n\n    //     if (style && style.height && !isNaN(style.height)) {\n    //         this.initialHeight = style.height;\n    //     }\n    //     this.setState({\n    //         currentVideoAspectRatio: deviceWidth + \":\" + this.initialHeight,\n    //     });\n\n    //     let { isFull } = this.props;\n    //     console.log(`isFull == ${isFull}`);\n    //     if (isFull) {\n    //         this._toFullScreen();\n    //     }\n    // }\n\n\n    useEffect(() => {\n        componentMounted.current = true;\n        StatusBar.setBarStyle(\"light-content\");\n        const { style, isGG } = props;\n\n        if (style && style.height && typeof style.height === 'number') {\n            initialHeight.current = style.height;\n        }\n        setCurrentVideoAspectRatio(deviceWidth + \":\" + initialHeight.current);\n\n        // const { isFull } = props;\n        console.log(`isFull == ${isFull}`);\n        if (isFull) toFullScreen();\n\n        return () => {\n            componentMounted.current = false;\n            if(isFull) closeFullScreen();\n        }\n    },[ isFull ]);\n\n        \n\n    // componentWillUnmount() {\n    //     this._componentMounted = false;\n\n    //     let { isFull } = this.props;\n    //     if (isFull) {\n    //         this._closeFullScreen();\n    //     }\n    // }\n\n    const closeFullScreen = () => {\n        const { closeFullScreen, BackHandle, Orientation } = props;\n        if (componentMounted.current) {\n            // this.setState({ isFull: false, currentVideoAspectRatio: deviceWidth + \":\" + this.initialHeight, });\n            setCurrentVideoAspectRatio(deviceWidth + \":\" + initialHeight.current);\n            setIsVidFull(false);\n\n        }\n        BackHandle && BackHandle.removeBackFunction(_fullKey);\n        Orientation && Orientation.lockToPortrait;\n        StatusBar.setHidden(false);\n        //StatusBar.setTranslucent(false);\n        componentMounted.current && closeFullScreen && closeFullScreen();\n    };\n\n    const toFullScreen = () => {\n        const { startFullScreen, BackHandle, Orientation } = props;\n        //StatusBar.setTranslucent(true);\n        // this.setState({ isFull: true, currentVideoAspectRatio: deviceHeight + \":\" + deviceWidth, });\n        setCurrentVideoAspectRatio(deviceHeight + \":\" + deviceWidth);\n        setIsVidFull(true);\n        StatusBar.setHidden(true);\n        BackHandle && BackHandle.addBackFunction(_fullKey, closeFullScreen);\n        startFullScreen && startFullScreen();\n        Orientation && Orientation.lockToLandscape && Orientation.lockToLandscape;\n    };\n\n    const _onLayout = (e: any) => {\n        let { \n            width: layoutWidth, \n            height: layoutHeight \n        } = e.nativeEvent.layout;\n        console.log(e.nativeEvent.layout);\n\n        if (layoutWidth * layoutHeight > 0) {\n            // this.width = layoutWidth;\n            // this.height = layoutHeight;\n            if (!initialHeight.current) {\n                initialHeight.current = layoutHeight;\n            }\n        }\n    }\n\n    let { \n        onGGEnd, \n        onEnd, \n        style, \n        title, \n        onLeftPress, \n        videoAspectRatio = null, \n        fullVideoAspectRatio = null\n    } = props;\n    \n    let currVidAspectRatio: string | null = null;\n    if (isFull) {\n        currVidAspectRatio = fullVideoAspectRatio;\n    } else {\n        currVidAspectRatio = videoAspectRatio;\n    }\n    if (!currVidAspectRatio) {\n        // let { width, height } = this.state;\n        currVidAspectRatio = currentVideoAspectRatio;\n    }\n    let realShowGG = false;\n    let type = '';\n    let ggType = '';\n    let showVideo = false;\n    let showTop = false;\n    if (showGG && ggUrl && !isEndGG) {\n        realShowGG = true;\n    }\n    if (currentUrl) {\n        if (!showGG || (showGG && isEndGG)) {\n            showVideo = true;\n        }\n        if (currentUrl.split) {\n            let types = currentUrl.split('.');\n            if (types && types.length > 0) {\n                type = types[types.length - 1];\n            }\n        }\n    }\n    if (ggUrl && ggUrl.split) {\n        let types = ggUrl.split('.');\n        if (types && types.length > 0) {\n            ggType = types[types.length - 1];\n        }\n    }\n    if (!showVideo && !realShowGG) {\n        showTop = true;\n    }\n    return (\n        <View\n            //onLayout={this._onLayout}\n            style={[isFull ? styles.container : { height: 200, backgroundColor: '#000' }, style]}>\n            {showTop && <View style={styles.topView}>\n                <View style={styles.backBtn}>\n                    {showBack && <TouchableOpacity\n                        onPress={() => {\n                            if (isFull) {\n                                closeFullScreen && closeFullScreen();\n                            } else {\n                                onLeftPress && onLeftPress();\n                            }\n                        }}\n                        style={styles.btn}\n                        activeOpacity={0.8}>\n                        <Icon name={'chevron-left'} size={30} color=\"#fff\" />\n                    </TouchableOpacity>\n                    }\n                    <View style={{ justifyContent: 'center', flex: 1, marginRight: 10 }}>\n                        {showTitle &&\n                            <Text style={{ color: '#fff', fontSize: 16 }} numberOfLines={1}>{title}</Text>\n                        }\n                    </View>\n                </View>\n            </View>\n            }\n            {realShowGG && (\n                <VLCPlayerView\n                    {...props}\n                    videoAspectRatio={currentVideoAspectRatio}\n                    uri={ggUrl}\n                    source={{ uri: ggUrl, type: ggType }}\n                    type={ggType}\n                    isGG={true}\n                    showBack={showBack}\n                    showTitle={showTitle}\n                    isFull={isFull}\n                    onEnd={() => {\n                        onGGEnd && onGGEnd();\n                        setIsEndGG(true);\n                    }}\n                    startFullScreen={toFullScreen}\n                    closeFullScreen={closeFullScreen}\n                />\n            )}\n\n            {showVideo && (\n                <VLCPlayerView\n                    {...props}\n                    uri={currentUrl}\n                    videoAspectRatio={currentVideoAspectRatio}\n                    onLeftPress={onLeftPress}\n                    title={title}\n                    type={type}\n                    isFull={isFull}\n                    showBack={showBack}\n                    showTitle={showTitle}\n                    isGG={true}\n                    // isEndGG={isEndGG}\n                    //initPaused={this.state.paused}\n                    style={showGG && !isEndGG ? { position: 'absolute', zIndex: -1 } : {}}\n                    source={{ uri: currentUrl, type: type }}\n                    startFullScreen={toFullScreen}\n                    closeFullScreen={closeFullScreen}\n                    onEnd={() => {\n                        onEnd && onEnd();\n                    }}\n                />\n            )}\n        </View>\n    );\n    \n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: '#000'\n    },\n    topView: {\n        top: Platform.OS === 'ios' ? statusBarHeight : 0,\n        left: 0,\n        height: 45,\n        position: 'absolute',\n        width: '100%'\n    },\n    backBtn: {\n        height: 45,\n        width: '100%',\n        flexDirection: 'row',\n        alignItems: 'center'\n    },\n    btn: {\n        marginLeft: 10,\n        marginRight: 10,\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: 'rgba(0,0,0,0.1)',\n        height: 40,\n        borderRadius: 20,\n        width: 40,\n    }\n});\n"]}